<?php
require_once 'inc/config.php';

$defaultLang = Config::$default['lang_default'] ?? 'de';
$lang = strtolower($_POST['lang'] ?? $_GET['lang'] ?? $defaultLang);
if (!in_array($lang, ['de','en','fr','it'])) $lang = $defaultLang;

// Translations
$T = [
'de' => [
'link_not_found' => "❌ Link nicht gefunden oder bereits benutzt.",
'file_missing' => "❌ Datei nicht mehr vorhanden.",
'password_required' => "🔐 Passwort erforderlich",
'enter_password' => "🔐 Passwort eingeben",
'start_download' => "📥 Download starten",
'no_file_selected' => "❌ Keine Datei ausgewählt.",
'upload_error' => "❌ Fehler beim Hochladen der Datei.",
'upload_text' => "⬆️ Hochladen",
'upload_success' => "✅ Hochladen erfolgreich",
'creating_zip' => "⏳ ZIP wird erstellt...",
'temp_dir_error' => "❌ Konnte temporäres Verzeichnis nicht anlegen.",
'error_upload_file' => "❌ Fehler beim Hochladen der Datei ",
'wrong_password' => "❌ Falsches Passwort",
'your_link' => "Dein Link:",
'copy' => "📋 Kopieren",
'copied' => "✅ Kopiert!",
'share_files' => "📤 Dateien teilen",
'drag_files' => "📂 Dateien hierher ziehen oder klicken",
'password_optional' => "🔐 Passwort (optional)",
'valid_once' => "⏳ Nur 1× herunterladbar",
'valid_1h' => "🕐 1 Stunde gültig",
'valid_3h' => "🕒 3 Stunden gültig",
'valid_6h' => "🕕 6 Stunden gültig",
'valid_12h' => "🕛 12 Stunden gültig",
'valid_1d' => "📅 1 Tag gültig",
'valid_3d' => "📅 3 Tage gültig",
'valid_7d' => "📅 7 Tage gültig",
'valid_14d' => "📅 14 Tage gültig",
'valid_30d' => "📅 30 Tage gültig",
'valid_forever' => "📅 Unbegrenzt gültig",
'upload_button' => "📤 Hochladen & Link erstellen",
'upload_button_only_upload' => "📤 Hochladen",
'upload_button_send_email' => "📤 Hochladen & E-Mail senden",
'uploading' => "📤 Dateien werden hochgeladen...",
'selected_files' => "Ausgewählte Datei",
'selected_files_plural' => "Ausgewählte Dateien",
'diskspace_error' => "❌ Nicht genügend Speicherplatz!",
'diskspace_check_failed' => "⚠️ Speicherplatzprüfung fehlgeschlagen!",
'diskspace_required' => "Benötigt:",
'diskspace_free' => "Frei:",
'send_email_yes' => "📧 Per E-Mail senden",
'send_email_no' => "🔗 Nur Link erstellen",
'uploader_email' => "📨 Deine E-Mail-Adresse (erforderlich)",
'recipient_email' => "📬 Alle Empfänger E-Mail-Adressen (erforderlich)",
'email_sent' => "✅ E-Mail an dich gesendet, bitte verifiziere den Link.",
'sent_title_uploader' => "Bestätige deinen Upload",
'sent_message_uploader' => "<p>Hallo,</p><p>bitte bestätige deinen Upload durch Klick auf den untenstehenden Link.</p><p>Viele Grüsse</p>",
'verification_title' => "⚠️ Bestätigung erforderlich",
'verification_text' => "Um den Upload zu bestätigen, klicke bitte auf den folgenden Button:",
'verification_button' => "✅ Upload bestätigen",
'verification_link_error' => "❌ Ungültiger oder manipulierte Link.",
'verification_database_error' => "❌ Datei-Datenbank fehlt.",
'verification_token_error' => "❌ Upload nicht gefunden.",
'verification_email_error' => "❌ E-Mail stimmt nicht mit Upload überein.",
'verification_verified_error' => "✅ Dieser Upload wurde bereits bestätigt.",
'verification_recipient_error' => "❌ Kein gültiger Empfänger oder Link.",
'sent_title_recipient' => "Ihr Download-Link",
'sent_message_recipient1' => "<p>Hallo,</p><p>Sie haben eine Datei von ",
'sent_message_recipient2' => "erhalten.</p><p>Sie können die Datei jetzt mit dem untenstehenden Link herunterladen.</p></p><p>Viele Grüsse</p>",
'verification_success' => "✅ Upload bestätigt. Die Empfänger wurden benachrichtigt.",
'language' => "Sprache",
'title' => "Dropzone File Sharing",
'version' => "V.2.3",
'footer_text' => "© 2025 von Kevin Tobler - <a href='https://kevintobler.ch' target='_blank'>www.kevintobler.ch</a>",
],
'en' => [
'link_not_found' => "❌ Link not found or already used.",
'file_missing' => "❌ File no longer available.",
'password_required' => "🔐 Password required",
'enter_password' => "🔐 Enter password",
'start_download' => "📥 Start download",
'no_file_selected' => "❌ No file selected.",
'upload_error' => "❌ Error uploading the file.",
'upload_text' => "⬆️ Upload",
'upload_success' => "✅ Upload finished",
'creating_zip' => "⏳ Creating ZIP...",
'temp_dir_error' => "❌ Could not create temporary directory.",
'error_upload_file' => "❌ Error uploading file ",
'wrong_password' => "❌ Incorrect password",
'your_link' => "Your link:",
'copy' => "📋 Copy",
'copied' => "✅ Copied!",
'share_files' => "📤 Share files",
'drag_files' => "📂 Drag files here or click",
'password_optional' => "🔐 Password (optional)",
'valid_once' => "⏳ Downloadable only 1x",
'valid_1h' => "🕐 Valid for 1 hour",
'valid_3h' => "🕒 Valid for 3 hours",
'valid_6h' => "🕕 Valid for 6 hours",
'valid_12h' => "🕛 Valid for 12 hours",
'valid_1d' => "📅 Valid for 1 day",
'valid_3d' => "📅 Valid for 3 days",
'valid_7d' => "📅 Valid for 7 days",
'valid_14d' => "📅 Valid for 14 days",
'valid_30d' => "📅 Valid for 30 days",
'valid_forever' => "📅 Valid forever",
'upload_button' => "📤 Upload & create link",
'upload_button_only_upload' => "📤 Upload",
'upload_button_send_email' => "📤 Upload & send email",
'uploading' => "📤 Uploading files...",
'selected_files' => "Selected file",
'selected_files_plural' => "Selected files",
'diskspace_error' => "❌ Not enough disk space!",
'diskspace_check_failed' => "⚠️ Disk space check failed!",
'diskspace_required' => "Required:",
'diskspace_free' => "Free:",
'send_email_yes' => "📧 Send by email",
'send_email_no' => "🔗 Create Link only",
'uploader_email' => "📨 Your email address (required)",
'recipient_email' => "📬 All recipient email addresses (required)",
'email_sent' => "✅ An email has been sent to you. Please verify the link.",
'sent_title_uploader' => "Confirm your upload",
'sent_message_uploader' => "<p>Hello,</p><p>Please confirm your upload by clicking the link below.</p><p>Best regards</p>",
'verification_title' => "⚠️ Confirmation required",
'verification_text' => "To confirm the upload, please click the button below:",
'verification_button' => "✅ Confirm upload",
'verification_link_error' => "❌ Invalid or manipulated link.",
'verification_database_error' => "❌ File database is missing.",
'verification_token_error' => "❌ Upload not found.",
'verification_email_error' => "❌ Email does not match the upload.",
'verification_verified_error' => "✅ This upload has already been confirmed.",
'verification_recipient_error' => "❌ Invalid recipient or download link.",
'sent_title_recipient' => "Your download link",
'sent_message_recipient1' => "<p>Hello,</p><p>You have received a file from ",
'sent_message_recipient2' => ".</p><p>You can now download the file using the link below.</p><p>Best regards</p>",
'verification_success' => "✅ Upload confirmed. The recipients have been notified.",
'language' => "Language",
'title' => "Dropzone File Sharing",
'version' => "V.2.3",
'footer_text' => "© 2025 by Kevin Tobler - <a href='https://kevintobler.ch' target='_blank'>www.kevintobler.ch</a>",
],
'fr' => [
'link_not_found' => "❌ Le lien n'a pas été trouvé ou il est déjà utilisé.",
'file_missing' => "❌ Le fichier n'existe pas.",
'password_required' => "🔐 Un mot de passe est attendu",
'enter_password' => "🔐 Donnez un mot de passe",
'start_download' => "📥 Commencer le téléchargement",
'no_file_selected' => "❌ Aucun fichier de sélectionné.",
'upload_error' => "❌ Erreur d'envoi'.",
'upload_text' => "⬆️ Envoi",
'upload_success' => "✅ Envoi terminé",
'creating_zip' => "⏳ Création du fichier ZIP...",
'temp_dir_error' => "❌ Impossible de créer le répertoire temporaire.",
'error_upload_file' => "❌ Erreur d'envoi de fichier ",
'wrong_password' => "❌ Mot de passe incorrect",
'your_link' => "Votre lien:",
'copy' => "📋 Copier",
'copied' => "✅ Copié!",
'share_files' => "📤 Partager des fichier",
'drag_files' => "📂 Déposer des fichiers ou cliquer ici",
'password_optional' => "🔐 Mot de passe (optionel)",
'valid_once' => "⏳ Téléchargeable seulement 1x",
'valid_1h' => "🕐 Valide pour 1 heure",
'valid_3h' => "🕒 Valide pour 3 heures",
'valid_6h' => "🕕 Valide pour 6 heures",
'valid_12h' => "🕛 Valide pour 12 heures",
'valid_1d' => "📅 Valide pour 1 jour",
'valid_3d' => "📅 Valide pour 3 jours",
'valid_7d' => "📅 Valide pour 7 jours",
'valid_14d' => "📅 Valide pour 14 jours",
'valid_30d' => "📅 Valide pour 30 jours",
'valid_forever' => "📅 Valide indéfiniment",
'upload_button' => "📤 Envoyer & créer le lien",
'upload_button_only_upload' => "📤 Envoyer",
'upload_button_send_email' => "📤 Envoyer & envoyer un email",
'uploading' => "📤 Téléchargement des fichiers...",
'selected_files' => "Selectionner fichier",
'selected_files_plural' => "Selectionner plusieurs fichiers",
'diskspace_error' => "❌ Espace disque insuffisant!",
'diskspace_check_failed' => "⚠️ Vérification de l’espace disque échouée!",
'diskspace_required' => "Nécessaire:",
'diskspace_free' => "Libre:",
'send_email_yes' => "📧 Envoyer par email",
'send_email_no' => "🔗 Créer uniquement le lien",
'uploader_email' => "📨 Votre adresse email (obligatoire)",
'recipient_email' => "📬 Toutes les adresses email des destinataires (obligatoire)",
'email_sent' => "✅ Un email vous a été envoyé. Veuillez vérifier le lien.",
'sent_title_uploader' => "Confirmez votre envoi",
'sent_message_uploader' => "<p>Bonjour,</p><p>Veuillez confirmer votre envoi en cliquant sur le lien ci-dessous.</p><p>Meilleures salutations</p>",
'verification_title' => "⚠️ Confirmation requise",
'verification_text' => "Pour confirmer l'envoi, veuillez cliquer sur le bouton ci-dessous:",
'verification_button' => "✅ Confirmer l'envoi",
'verification_link_error' => "❌ Lien invalide ou modifié.",
'verification_database_error' => "❌ Base de données des fichiers manquante.",
'verification_token_error' => "❌ Envoi introuvable.",
'verification_email_error' => "❌ L'adresse email ne correspond pas à l'envoi.",
'verification_verified_error' => "✅ Cet envoi a déjà été confirmé.",
'verification_recipient_error' => "❌ Destinataire ou lien de téléchargement invalide.",
'sent_title_recipient' => "Votre lien de téléchargement",
'sent_message_recipient1' => "<p>Bonjour,</p><p>Vous avez reçu un fichier de la part de ",
'sent_message_recipient2' => ".</p><p>Vous pouvez maintenant télécharger le fichier via le lien ci-dessous.</p><p>Meilleures salutations</p>",
'verification_success' => "✅ Téléversement vérifié. Les destinataires ont été notifiés.",
'language' => "Langage",
'title' => "Dropzone File Sharing",
'version' => "V.2.3",
'footer_text' => "© 2025 par Kevin Tobler - <a href='https://kevintobler.ch' target='_blank'>www.kevintobler.ch</a>",
],
'it' => [
'link_not_found' => "❌ Link non trovato o già utilizzato.",
'file_missing' => "❌ Il file non è più disponibile.",
'password_required' => "🔐 È richiesta una password",
'enter_password' => "🔐 Inserisci la password",
'start_download' => "📥 Avvia download",
'no_file_selected' => "❌ Nessun file selezionato.",
'upload_error' => "❌ Errore durante il caricamento.",
'upload_text' => "⬆️ Carica",
'upload_success' => "✅ Caricamento completato",
'creating_zip' => "⏳ Creazione dell'archivio ZIP in corso...",
'temp_dir_error' => "❌ Impossibile creare la cartella temporanea.",
'error_upload_file' => "❌ Errore nel caricamento del file ",
'wrong_password' => "❌ Password errata",
'your_link' => "Il tuo link:",
'copy' => "📋 Copia",
'copied' => "✅ Copiato!",
'share_files' => "📤 Condividi file",
'drag_files' => "📂 Trascina i file qui o clicca",
'password_optional' => "🔐 Password (opzionale)",
'valid_once' => "⏳ Scaricabile solo una volta",
'valid_1h' => "🕐 Valido per 1 ora",
'valid_3h' => "🕒 Valido per 3 ore",
'valid_6h' => "🕕 Valido per 6 ore",
'valid_12h' => "🕛 Valido per 12 ore",
'valid_1d' => "📅 Valido per 1 giorno",
'valid_3d' => "📅 Valido per 3 giorni",
'valid_7d' => "📅 Valido per 7 giorni",
'valid_14d' => "📅 Valido per 14 giorni",
'valid_30d' => "📅 Valido per 30 giorni",
'valid_forever' => "📅 Valido indefinitamente",
'upload_button' => "📤 Carica & crea link",
'upload_button_only_upload' => "📤 Carica",
'upload_button_send_email' => "📤 Carica & invia email",
'uploading' => "📤 Caricamento dei file...",
'selected_files' => "File selezionato",
'selected_files_plural' => "File selezionati",
'diskspace_error' => "❌ Spazio su disco insufficiente!",
'diskspace_check_failed' => "⚠️ Controllo dello spazio su disco non riuscito!",
'diskspace_required' => "Necessario:",
'diskspace_free' => "Libero:",
'send_email_yes' => "📧 Invia via email",
'send_email_no' => "🔗 Crea solo il link",
'uploader_email' => "📨 Il tuo indirizzo email (obbligatorio)",
'recipient_email' => "📬 Tutti gli indirizzi email dei destinatari (obbligatorio)",
'email_sent' => "✅ Ti è stata inviata un'email. Verifica il link.",
'sent_title_uploader' => "Conferma il tuo upload",
'sent_message_uploader' => "<p>Ciao,</p><p>Conferma il tuo upload cliccando sul link sottostante.</p><p>Cordiali saluti</p>",
'verification_title' => "⚠️ Conferma richiesta",
'verification_text' => "Per confermare l'upload, clicca sul seguente pulsante:",
'verification_button' => "✅ Conferma upload",
'verification_link_error' => "❌ Link non valido o manomesso.",
'verification_database_error' => "❌ Database dei file mancante.",
'verification_token_error' => "❌ Upload non trovato.",
'verification_email_error' => "❌ L'email non corrisponde all'upload.",
'verification_verified_error' => "✅ Questo upload è già stato confermato.",
'verification_recipient_error' => "❌ Destinatario o link non valido.",
'sent_title_recipient' => "Il tuo link per il download",
'sent_message_recipient1' => "<p>Ciao,</p><p>Hai ricevuto un file da ",
'sent_message_recipient2' => ".</p><p>Ora puoi scaricare il file dal link sottostante.</p><p>Cordiali saluti</p>",
'verification_success' => "✅ Caricamento verificato. I destinatari sono stati notificati.",
'language' => "Lingua",
'title' => "Dropzone File Sharing",
'version' => "V.2.3",
'footer_text' => "© 2025 di Kevin Tobler - <a href='https://kevintobler.ch' target='_blank'>www.kevintobler.ch</a>",
]
];

// Use translations
$t = $T[$lang];